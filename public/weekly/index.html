<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="index,follow">
  <meta name="theme-color" content="#0B0F1A">
  <title>Weekly Strategy — FinLogicHub5</title>
  <meta name="description" content="Weekly Market Risk Review and allocation strategy. Institutional-style summary of regime, trend, and stress signals.">
  <link rel="canonical" href="https://finlogichub5.com/weekly/">
  <meta property="og:type" content="website">
  <meta property="og:title" content="Weekly Strategy — FinLogicHub5">
  <meta property="og:description" content="Weekly Market Risk Review and allocation strategy. Institutional-style summary of regime, trend, and stress signals.">
  <meta property="og:url" content="https://finlogichub5.com/weekly/">
  <meta property="og:image" content="https://finlogichub5.com/og/mri-latest.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root { --bg:#0B0F1A; --panel:rgba(12,19,32,0.7); --text:#E5EDFF; --muted:#8FA3C8; --cyan:#00E5FF; --purple:#7B61FF; }
    * { box-sizing: border-box; }
    body { margin:0; font-family:"Space Grotesk",sans-serif; background:#0B0F1A; color:var(--text); }
    .container { max-width: 980px; margin:0 auto; padding: 24px; }
    .nav { display:flex; gap:14px; flex-wrap:wrap; font-size:12px; color:var(--muted); }
    .nav a { padding:6px 10px; border-radius:999px; background:rgba(255,255,255,0.05); }
    h1 { margin:16px 0 6px 0; font-size: clamp(28px, 5vw, 48px); }
    .panel { margin-top:16px; padding:18px; border-radius:16px; background:var(--panel); border:1px solid rgba(255,255,255,0.08); }
    .ads { margin: 16px 0; padding: 14px; border:1px dashed rgba(255,255,255,0.15); border-radius: 12px; color: var(--muted); font-size: 12px; min-height: 120px; display:flex; align-items:center; justify-content:center; }
    h2 { margin:18px 0 8px 0; font-size:18px; }
    p { color: var(--muted); line-height:1.7; margin:0 0 10px 0; }
  </style>
</head>
<body>
  <div class="container">
    <div class="nav">
      <a href="/">Daily Risk</a>
      <a href="/weekly/">Weekly Strategy</a>
      <a href="/archive/">Risk Archive</a>
      <a href="/methodology/">Methodology</a>
      <a href="/lab/">Lab</a>
    </div>
    <h1>Weekly Risk Review</h1>
    <p>Institutional-style summary of market risk regime and allocation posture.</p>
    <div class="panel">
      <h2>Get Email Alerts</h2>
      <p>Subscribe to regime change and high/low risk notifications.</p>
      <p><a href="https://formspree.io/f/FORM_ID">Subscribe for alerts</a></p>
    </div>
    <div class="panel">
      <h2 id="toc">Table of Contents</h2>
      <ul>
        <li><a href="#allocation-strategy" data-track="weekly_toc_click" data-section="allocation">Allocation Strategy</a></li>
        <li><a href="#regime-outlook" data-track="weekly_toc_click" data-section="regime">Regime Outlook</a></li>
        <li><a href="#investor-actions" data-track="weekly_toc_click" data-section="actions">What Investors Should Do</a></li>
        <li><a href="#weekly-trend" data-track="weekly_toc_click" data-section="trend">Weekly Risk Trend</a></li>
        <li><a href="#regime-prob" data-track="weekly_toc_click" data-section="prob">Regime Probability</a></li>
      </ul>
    </div>
    <div class="panel">
      <h2 id="allocation-strategy">Allocation Strategy</h2>
      <p>Maintain allocation discipline based on the Market Risk Index (MRI). When regime risk is elevated, keep equity exposure in the lower bound of the suggested range and emphasize drawdown control.</p>
      <h2 id="regime-outlook">Regime Outlook</h2>
      <p>Trend, stress, and regime components are reviewed weekly to determine whether market risk is improving, stabilizing, or deteriorating. This outlook informs weekly allocation adjustments and hedging posture.</p>
      <h2 id="investor-actions">What Investors Should Do</h2>
      <p>Use the weekly review as a high-level risk compass. Align position sizing with current MRI risk level and avoid chasing short-term noise.</p>
      <div class="ads" data-ad-slot="weekly-top" data-loaded="false">Ad Slot — After TOC</div>
      <h2 id="weekly-trend">Weekly Risk Trend (7 Days)</h2>
      <div style="height:160px; margin-top:6px;">
        <svg id="weeklyTrend" width="100%" height="160" viewBox="0 0 600 160" preserveAspectRatio="none"></svg>
      </div>
      <div class="ads" data-ad-slot="weekly-mid" data-loaded="false">Ad Slot — Mid Article</div>
      <h2 id="regime-prob">Regime Probability</h2>
      <p id="regimeProb">Calculating regime persistence...</p>
      <div class="ads" data-ad-slot="weekly-footer" data-loaded="false">Ad Slot — Footer</div>
    </div>
    <div class="panel">
      <h2>Weekly Checklist</h2>
      <label><input type="checkbox"> Confirm current regime</label><br>
      <label><input type="checkbox"> Review allocation range</label><br>
      <label><input type="checkbox"> Decide whether to rebalance</label>
    </div>
    <div class="panel" style="margin-top:18px;">
      <h2>Explore More</h2>
      <p><a href="/daily/">Latest Daily</a> · <a href="/weekly/">Weekly Strategy</a> · <a href="/risk-levels/">Risk Levels</a> · <a href="/market-risk-explained/">Market Risk Explained</a></p>
    </div>
  </div>
  <script>
    (async function() {
      try {
        const res = await fetch('/data/risk_index_history.json', { cache: 'no-store' });
        if (!res.ok) throw new Error('risk_index_history.json');
        const hist = await res.json();
        const last7 = hist.slice(-7);
        const scores = last7.map(h => h.score);
        const svg = document.getElementById('weeklyTrend');
        const points = scores.map((v, i) => {
          const x = (i / Math.max(1, scores.length - 1)) * 600;
          const y = 140 - (v / 100) * 120;
          return `${x},${y}`;
        }).join(' ');
        svg.innerHTML = `<polyline fill=\"none\" stroke=\"#00E5FF\" stroke-width=\"2\" points=\"${points}\" />`;

        // Regime probability: compare current duration to historical average duration
        const levels = hist.map(h => h.level);
        let runs = [];
        let current = levels[0];
        let count = 0;
        levels.forEach(l => {
          if (l === current) count += 1;
          else { runs.push(count); current = l; count = 1; }
        });
        runs.push(count);
        const avg = runs.reduce((a,b)=>a+b,0) / Math.max(1, runs.length);
        const currentDuration = (() => {
          const lastLevel = levels[levels.length - 1];
          let d = 0;
          for (let i = levels.length - 1; i >= 0; i--) {
            if (levels[i] === lastLevel) d += 1;
            else break;
          }
          return d;
        })();
        const note = currentDuration >= avg
          ? `Probability of regime change increases after ${Math.round(avg)} days. Current duration: ${currentDuration} days.`
          : `Regime change probability remains moderate. Current duration: ${currentDuration} days (avg ${Math.round(avg)}).`;
        document.getElementById('regimeProb').textContent = note;
      } catch (e) {
        document.getElementById('regimeProb').textContent = 'Regime probability unavailable.';
      }
    })();
    function trackEvent(name, payload) {
      if (window.track) window.track(name, payload || {});
    }
    document.querySelectorAll('[data-track]').forEach(el => {
      el.addEventListener('click', () => {
        trackEvent(el.dataset.track, { section: el.dataset.section || '' });
      });
    });
    const adSlots = document.querySelectorAll('.ads[data-ad-slot]');
    const adObserver = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.dataset.loaded = 'true';
          adObserver.unobserve(entry.target);
        }
      });
    }, { rootMargin: '200px' });
    adSlots.forEach(slot => adObserver.observe(slot));
  </script>
</body>
</html>
